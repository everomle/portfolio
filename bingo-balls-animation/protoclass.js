function $A(a){if(!a)return[];if(a.toArray)return a.toArray();for(var b=a.length||0,c=new Array(b);b--;)c[b]=a[b];return c}var Class={create:function(){function a(){this.initialize.apply(this,arguments)}var b=null,c=$A(arguments);if(Object.isFunction(c[0])&&(b=c.shift()),Object.extend(a,Class.Methods),a.superclass=b,a.subclasses=[],b){var d=function(){};d.prototype=b.prototype,a.prototype=new d,b.subclasses.push(a)}for(var e=0;e<c.length;e++)a.addMethods(c[e]);return a.prototype.initialize||(a.prototype.initialize=this.emptyFunction),a.prototype.constructor=a,a},emptyFunction:function(){}};Class.Methods={addMethods:function(a){var b=this.superclass&&this.superclass.prototype,c=Object.keys(a);Object.keys({toString:!0}).length||c.push("toString","valueOf");for(var d=0,e=c.length;e>d;d++){var f=c[d],g=a[f];if(b&&Object.isFunction(g)&&"$super"==g.argumentNames().first())var h=g,g=Object.extend(function(a){return function(){return b[a].apply(this,arguments)}}(f).wrap(h),{valueOf:function(){return h},toString:function(){return h.toString()}});this.prototype[f]=g}return this}},Object.extend=function(a,b){for(var c in b)a[c]=b[c];return a},Object.extend(Object,{inspect:function(a){try{return Object.isUndefined(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(b){if(b instanceof RangeError)return"...";throw b}},toJSON:function(a){var b=typeof a;switch(b){case"undefined":case"function":case"unknown":return;case"boolean":return a.toString()}if(null===a)return"null";if(a.toJSON)return a.toJSON();if(!Object.isElement(a)){var c=[];for(var d in a){var e=Object.toJSON(a[d]);Object.isUndefined(e)||c.push(d.toJSON()+": "+e)}return"{"+c.join(", ")+"}"}},toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:function(a){var b=[];for(var c in a)b.push(c);return b},values:function(a){var b=[];for(var c in a)b.push(a[c]);return b},clone:function(a){return Object.extend({},a)},isElement:function(a){return a&&1==a.nodeType},isArray:function(a){return null!=a&&"object"==typeof a&&"splice"in a&&"join"in a},isHash:function(a){return a instanceof Hash},isFunction:function(a){return"function"==typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isUndefined:function(a){return"undefined"==typeof a}}),(WebKit=navigator.userAgent.indexOf("AppleWebKit/")>-1)&&($A=function(a){if(!a)return[];if((!Object.isFunction(a)||"[object NodeList]"!=a)&&a.toArray)return a.toArray();for(var b=a.length||0,c=new Array(b);b--;)c[b]=a[b];return c});